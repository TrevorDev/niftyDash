link(rel='import' href="/bower_components/polymer/polymer.html")

link(rel="import" href="/bower_components/paper-menu/paper-menu.html")
link(rel="import" href="/bower_components/paper-item/paper-item.html")
link(rel="import" href="/bower_components/paper-badge/paper-badge.html")
link(rel="import" href="/bower_components/paper-toolbar/paper-toolbar.html")
link(rel="import" href="/bower_components/iron-icons/iron-icons.html")
link(rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html")

style.
  .with-badge {
    
  }

dom-module(id="widget-menu")
  template
    paper-toolbar
      //- paper-icon-button(icon="star")
      div
        h2 Widgets
    paper-menu(selected="0")
      template(is="dom-repeat" items="{{_toArray(widgets)}}")
        paper-item(on-click="onClick")
          span {{item.name}}
            template(is="dom-if" if="{{item.notification}}")
              paper-badge(label="{{item.notification}}" style="position:fixed;display:inline")
      paper-item(on-click="onClick")
        span Add Widgets/Settings
  script.
    Polymer({
      is: "widget-menu",
      properties: {
        owner: {
          type: Object
        },
        widgets: {
          type: Array
        },
        clickedEvent: {
          type: Function
        }
      },
      onClick: function(event) {
        this.clickedEvent(event.model ? event.model.item.id : "config")
      },
      ready: function() {
      },
      _toArray: function(obj) {
          return Object.keys(obj).map(function(key) {
            return obj[key];
          });
        }
    });
